<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .navbar .navbar-brand {
            font-weight: 700;
            font-size: 26px;

        }

        .navbar .nav-link {
            font-size: 19px;
            font-weight: 600;
            transition: 0.4s ease-in-out;

        }

        .navbar {
            font-family: 'Josefin Slab', serif;

        }

        .navbar .nav-link:hover {

            transform: translateY(-0.7px);
            ;
        }
        .card-body{
          font-family: 'Josefin slab',serif;
        }
        .card{
          transition: 0.4s ease-in-out;

        }
        .card:hover{
          transform: translate(-1.5px);
          box-shadow: 7px 6px 4px rgb(105, 102, 102);
          cursor: pointer;
        }
        h3{
          color:#e5eff7;
         
        }
        p{
          color:#e5eff7;
          font-size: 16px;
        }
        h1{
          color: white;
          font-family: 'Josefin slab', serif;
        }
        #headPara{
          font-family: cursive;
        }
        @media(max-width:576px){
          #headPara{
            font-size: 15px;
          }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Crete+Round&family=Delius&family=Eczar&family=Josefin+Slab:wght@700&family=Mochiy+Pop+One&family=Nunito&family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Donuts Page</title>
</head>
<body class="d-flex flex-column vh-100" style="background-color: #e5eff7;">
    <nav class="navbar fixed-top navbar-expand-lg  navbar-dark bg-dark ">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">CoffeeDelight</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="/home">Home</a>
                    <a class="nav-link" href="/HotCoffee">Coffees</a>
                    <% if(factor==0) { %>
                        <a class="nav-link" href="/registration">Registration</a>
                        <% } %>
                        <% if(factor==1) { %>
                          <a class="nav-link" href="/update">Update</a>
                          <% } %> 
                </div>
                <div class="navbar-nav" style="margin-left: auto;padding-right: 13px;">
                    <% if(factor==0) { %> <a class="nav-link" href="/LogIn">Log In</a>
                        <% } %>
                            <% if(factor==1) { %> 
                              <a class="nav-link" href="/goToCart/donuts/<%= user.username %>" style="color:#e5eff7;">&#128722;</a>
                              <a class="nav-link" href="/LogOut">Log Out</a>
                                <% } %>
                </div>
            </div>
        </div>
    </nav>
    <div class="container mt-5 px-0">
      <div class="row py-1">
          <div class="col-10 mt-4 offset-1 px-5 py-5" style="box-shadow: 5px 4px 4px rgb(105, 102, 102);
          background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)),url('https://images.unsplash.com/photo-1527515545081-5db817172677?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80');
          border-radius: 25px;">
              <section  style="max-width: 92%; border: 1.75px solid white ;text-align: center;border-radius: 22px;"
                  class="py-3 my-2 mx-4 px-3">
                  <h1 >Donut Delights</h1> 
                  <p id="headPara">Welcome to donuts section, if you are looking for a perfect snack that goes along with your morning coffee then
                    my friend you have come to the right place, but beware you will not be able to stop once you start eating these fine looking donuts. So dive in and explore the world where taste and delight are the only principles.
                  </p>
              </section>
          </div>
      </div>
  </div>
    <div class="container mt-3">
      <% if(NotLoggedIn.length>0)  {%> 
        <div class="alert alert-danger  mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>ERROR : </strong> <%= NotLoggedIn %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
      <% } %>
      <% if(ReviewAdded.length>0)  {%> 
        <div class="alert alert-secondary mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>SUCCESS : </strong> <%= ReviewAdded %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
      <% } %>
      <% if(ReviewDeleted.length>0)  {%> 
        <div class="alert alert-secondary mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>SUCCESS : </strong> <%= ReviewDeleted %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
      <% } %>  
      <% if(orderAdded.length>0)  {%> 
        <div class="alert alert-secondary mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>SUCCESS : </strong> <%= orderAdded %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
      <% } %>  
      <% if(orderRemoved.length>0)  {%> 
        <div class="row">
          <div class="col-12">
        <div class="alert alert-secondary mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>SUCCESS : </strong> <%= orderRemoved %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
        </div>
        </div>
      <% } %>
      <% if(notAdded.length>0)  {%> 
        <div class="row">
          <div class="col-12">
        <div class="alert alert-danger mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>ERROR : </strong> <%= notAdded %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
        </div>
        </div>
      <% } %>
      <% if(cartIsEmptied.length>0)  {%> 
        <div class="row">
          <div class="col-12">
        <div class="alert alert-secondary mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>SUCCESS : </strong> <%= cartIsEmptied %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
        </div>
        </div>
      <% } %>
      <% if(emptyCart.length>0)  {%> 
        <div class="row">
          <div class="col-12">
        <div class="alert alert-danger mt-3 alert-dismissible fade show text-center" role="alert">
          <strong>ERROR : </strong> <%= emptyCart %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
        </div>
        </div>
      <% } %>
      <% if(likesFlash.length > 0)  {%> 
        <div class="row">
          <div class="col-10 offset-1">
        <div class="alert alert-primary mt-3 alert-dismissible fade show text-center" role="alert">
          <%= likesFlash %> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>  
        </div>
        </div>
      <% } %>
      <h1  style="font-weight: 600;text-shadow: 2px 1px 4px #7a7979;color: black;font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;text-align: center;">Donuts Menu</h1>
        <div class="row mt-3">
            
            <div class="col-md-12 col-lg-12 mt-1">
              <% for(let i=0;i<donuts.length;i+=3) { %>
                <div class="card-group mb-3">
                  <div class="card mx-2 bg-secondary">
                    <img style="height: 400px"  src="<%= donuts[i].image %>" class="card-img-top " alt="..." >
                    <div class="card-body ">
                      <h3 class="card-title"><%= donuts[i].name %> <span style="color:#e5eff7;font-size: 16px;">(&#8377; <%= donuts[i].price %> )</span></h3>
                      <p class="card-text"><%= donuts[i].description %> </p>
                    </div>
                    <div class="card-footer">
                      <a class="btn btn-warning btn-sm" href="/showreviews/donuts/<%= donuts[i].name %>">Reviews</a>
                      <a class="btn btn-info btn-sm" href="/review/donuts/<%= donuts[i].name %> ">Add Review</a>
                      <% if(factor == 1) { %>
                        <form method="POST" style="display: inline" action="/like/donut/<%= donuts[i]._id %>">
                          <button class="btn btn-dark btn-sm"> &#128077; <%= donuts[i].likes && donuts[i].likes.length > 0 ? donuts[i].likes.length : 0 %></button>
                        </form>
                      <% } else { %>
                        <form style="display: inline" >
                          <button class="btn btn-dark disabled btn-sm">&#128077; <%= donuts[i].likes && donuts[i].likes.length > 0 ? donuts[i].likes.length : 0 %></button>
                        </form>
                      <% } %> 

                      <% if(factor==1) { %> 
                      <span class="btn-group mx-3 btn-group-sm" role="group" aria-label="Basic outlined example">
                        <a type="button" style="border-bottom-left-radius: 4px;border-top-left-radius: 3px;" href="/addToCart/donuts/<%= donuts[i].name %>/<%= user.username %>" class="btn btn-outline-light px-3">&#43;</a>
                        <a type="button" style="border-top-right-radius: 4px;border-bottom-right-radius: 3px;" href="/removeFromCart/donuts/<%= donuts[i].name %>/<%= user.username %>" class="btn btn-outline-light px-3">&#8722;</a>
                        <% for(let order of temp) { %>
                          <% if(order.productName == donuts[i].name) { %>
                            <span class="mx-1 text-dark badge bg-light" style="font-size: 16px;"><%= order.quantity %></span>
                            <% } %>  
                          <% } %> 
                      </span>
                      <% } %> 
                    </div>
                  </div>
                  <div class="card mx-2 bg-secondary">
                    <img style="height: 400px;" src="<%= donuts[i+1].image %>" class="card-img-top" alt="...">
                    <div class="card-body ">
                      <h3 class="card-title"><%= donuts[i+1].name %> <span style="color:#e5eff7;font-size: 16px;">(&#8377; <%= donuts[i+1].price %> )</span></h3>
                      <p class="card-text"><%= donuts[i+1].description %></p>
                    </div>
                    <div class="card-footer">
                      <a class="btn btn-warning btn-sm" href="/showreviews/donuts/<%= donuts[i+1].name %>">Reviews</a>
                      <a class="btn btn-info btn-sm" href="/review/donuts/<%= donuts[i+1].name %> ">Add Review</a>
                      <% if(factor == 1) { %>
                        <form method="POST" style="display: inline" action="/like/donut/<%= donuts[i+1]._id %>">
                          <button class="btn btn-dark btn-sm">&#128077; <%= donuts[i+1].likes && donuts[i+1].likes.length > 0 ? donuts[i+1].likes.length : 0 %></button>
                        </form>
                      <% } else { %>
                        <form style="display: inline" >
                          <button class="btn btn-dark disabled btn-sm">&#128077; <%= donuts[i+1].likes && donuts[i+1].likes.length > 0 ? donuts[i+1].likes.length : 0 %></button>
                        </form>
                      <% } %>

                      <% if(factor==1) { %> 
                      <span class="btn-group mx-3 btn-group-sm" role="group" aria-label="Basic outlined example">
                        <a type="button" style="border-bottom-left-radius: 4px;border-top-left-radius: 3px;" href="/addToCart/donuts/<%= donuts[i+1].name %>/<%= user.username %>" class="btn btn-outline-light px-3">&#43;</a>
                        <a type="button" style="border-top-right-radius: 4px;border-bottom-right-radius: 3px;" href="/removeFromCart/donuts/<%= donuts[i+1].name %>/<%= user.username %>" class="btn btn-outline-light px-3">&#8722;</a>
                        <% for(let order of temp) { %>
                          <% if(order.productName == donuts[i+1].name) { %>
                            <span class="mx-1 text-dark badge bg-light" style="font-size: 16px;"><%= order.quantity %></span>
                            <% } %>  
                          <% } %> 
                      </span>
                      <% } %> 
                    </div>
                  </div>
                  <div class="card mx-2 bg-secondary">
                    <img style="height: 400px;" src="<%= donuts[i+2].image %>" class="card-img-top" alt="...">
                    <div class="card-body ">
                      <h3 class="card-title"><%= donuts[i+2].name %> <span style="color:#e5eff7;font-size: 16px;">(&#8377; <%= donuts[i+2].price %> )</span></h3>
                      <p class="card-text"><%= donuts[i+2].description %></p>
                    </div>
                    <div class="card-footer">
                      <a class="btn btn-warning btn-sm" href="/showreviews/donuts/<%= donuts[i+2].name %>">Reviews</a>
                      <a class="btn btn-info btn-sm" href="/review/donuts/<%= donuts[i+2].name %> ">Add Review</a>
                      <% if(factor == 1) { %>
                        <form method="POST" style="display: inline" action="/like/donut/<%= donuts[i+2]._id %>">
                          <button class="btn btn-dark btn-sm">&#128077; <%= donuts[i+2].likes && donuts[i+2].likes.length > 0 ? donuts[i+2].likes.length : 0 %></button>
                        </form>
                      <% } else { %>
                        <form style="display: inline" >
                          <button class="btn btn-dark disabled btn-sm">&#128077; <%= donuts[i+2].likes && donuts[i+2].likes.length > 0 ? donuts[i+2].likes.length : 0 %></button>
                        </form>
                      <% } %>

                      <% if(factor==1) { %> 
                      <span class="btn-group mx-3 btn-group-sm" role="group" aria-label="Basic outlined example">
                        <a type="button" style="border-bottom-left-radius: 4px;border-top-left-radius: 3px;" href="/addToCart/donuts/<%= donuts[i+2].name %>/<%= user.username %>" class="btn btn-outline-light px-3">&#43;</a>
                        <a type="button" style="border-top-right-radius: 4px;border-bottom-right-radius: 3px;" href="/removeFromCart/donuts/<%= donuts[i+2].name %>/<%= user.username %>" class="btn btn-outline-light px-3">&#8722;</a>
                        <% for(let order of temp) { %>
                          <% if(order.productName == donuts[i+2].name) { %>
                            <span class="mx-1 text-dark badge bg-light" style="font-size: 16px;"><%= order.quantity %></span>
                            <% } %>  
                          <% } %> 
                      </span>
                      <% } %> 
                    </div>
                  </div>
                </div>
                  
              <% } %>  
            </div>

        </div>

    </div>



    <footer class="footer bg-dark py-2 mt-auto ">
        <div class="container">
            <span class="text-muted">&copy; CoffeeDelight 2021</span>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>
</html>